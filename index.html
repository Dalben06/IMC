<html>

<head>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js"
        integrity="sha384-ka7Sk0Gln4gmtz2MlQnikT1wXgYsOg+OMhuP+IlRH9sENBO0LRn5q+8nbTov4+1p"
        crossorigin="anonymous"></script>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-1BmE4kWBq78iYhFldvKuhfTAU6auU8tT94WrHftjDbrCEXSU1oBoqyl2QvZ6jIW3" crossorigin="anonymous">




</head>

<body>

    <div id="liveAlertPlaceholder"></div>

    <form class="container pt-5 gray-200 " onsubmit="calculateIMC()">

        <div class="jumbotron card p-5">
            <h3 class="mb-3">Calculo do IMC</h3>

            <div class="mb-3 row">
                <div class="col-6">
                    <label for="weigth" class="form-label">Peso</label>
                    <input type="number" class="form-control" id="weigth" placeholder="68">

                </div>
                <div class="col-6">
                    <label for="height" class="form-label">Altura</label>
                    <input type="number" class="form-control" id="height" placeholder="1.78"></input>
                </div>
            </div>

            <button type="button" onclick="calculateIMC()" class="mb-5 btn btn-primary">Calcular</button>

            <div id="result"></div>
        </div>

        

    </form>

    <script>
        function calculateIMC() {

            let weigth = Number.parseFloat(document.getElementById("weigth").value);
            let height = Number.parseFloat(document.getElementById("height").value);
            if (!isNaN(weigth) && !isNaN(height) != 0 && weigth != 0 && height != 0) {
                this.showResult(Number.parseFloat(weigth / (height * height)).toFixed(2));
            }
            else {
                this.alert('Altura e Peso são obrigatorios ou numeros invalidos!', 'danger');
                document.getElementById('cardResult')?.remove();
            }
        }


        function alert(message, type) {
            let wrapper = document.createElement('div');
            let id = new Date().getMilliseconds().toString();
            let alertPlaceholder = document.getElementById("liveAlertPlaceholder");
            wrapper.innerHTML = `<div Id=${id} class="alert alert-${type}  alert-dismissible" role="alert">
                ${message} 
             <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close">
            </button></div>`


            alertPlaceholder.append(wrapper)
            let element = document.getElementById(id);
            setTimeout(() => { element.remove(); }, 2000)
            
        }

        function showResult(result) {
            let resultModel = document.getElementById("result");
            let ExistResultValue = document.getElementById('resultValue');
            let ExistResultName = document.getElementById('resultName');
            if (ExistResultValue != undefined && ExistResultName != undefined) {
                ExistResultValue.innerHTML = `Seu IMC é ${result}`
                if(result > 0)
                    ExistResultName.innerHTML = `Esse IMC está na faixa de ${getNameOfIMC(result)}`;
            }
            else {
                let wrapper = document.createElement('div');
                wrapper.innerHTML =
                    `<div id="cardResult" class=\"card\">
                <h5 class=\"card-header\">Resultado do IMC</h5>
                <div class="card-body">
                    <h5 Id="resultValue" class="card-title">Seu IMC é de ${result}</h5>
                    <h6 Id="resultName" class="card-text">Esse IMC está na faixa de ${getNameOfIMC(result)}</h6>
                </div>
                </div>`;
                resultModel.append(wrapper);
            }


        }

        function getNameOfIMC(value) {
            if (isNaN(value))
                return 'Invalido';
            else if (value < 18.5)
                return 'Magreza';
            else if (value >= 18.5 && value <= 24.5)
                return 'Sobrepeso';
            else
                return 'Obesidade';

        }

    </script>
</body>

</html>